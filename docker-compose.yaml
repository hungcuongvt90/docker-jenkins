version: "3.7"
networks:
  jenkins:

services:
  jenkins:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        USER: cuong
        GROUP: cuong
        UID: 1000
        GID: 1000
        DOCKER_GID: 115
        HTTP_PORT: 8080
        AGENT_PORT: 50000
        JENKINS_VERSION: 2.289.3
        JENKINS_SHA: 996dfd29d5f933546af9e9f77c29b371fb0627b8266b6c9f134ac2e0f1248b87
        JENKINS_HOME: /home/cuong/jenkins_home
        TZ: ASIA/Ho_Chi_Minh
        DEBIAN_FRONTEND: noninteractive
    image: hungcuongvt90/jenkins:ubuntu-jenkins-2.289.3-cuong
    container_name: jenkins
    user: cuong
    expose:
      - 8080
    environment:
      - DOCKER_HOST=unix:///var/run/docker.sock
    volumes:
      - ${PWD}/../jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - jenkins
    restart: always
